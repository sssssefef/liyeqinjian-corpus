<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é‡Œè€¶ç§¦ç®€è¯­æ–™åº“æ£€ç´¢ç³»ç»Ÿ</title>
    <style>
        /* å…¨å±€é‡ç½®ï¼Œæç®€å„’é›… */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Palatino', 'Georgia', 'å®‹ä½“', 'Songti SC', 'Noto Serif SC', 'Times New Roman', serif;
        }

        body {
            background-color: #f9f3e9;  /* æµ…ç±³è‰²åº•ï¼Œè¡¬æ‰˜æš—çº¹ */
            color: #3c3629;
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 2rem 1.5rem;
            position: relative;
            
            /* ========== å¼ºçƒˆè€Œéšéšçº¦çº¦çš„ç§¦ç®€æš—çº¹ ========== */
            /* 1. ç«¹ç®€ç«–æ¡çº¹ - æœ€æ˜æ˜¾çš„ç®€ç‰æ„è±¡ */
            background-image: 
                repeating-linear-gradient(90deg, 
                    rgba(140, 110, 70, 0.15) 0px, 
                    rgba(140, 110, 70, 0.15) 1px, 
                    transparent 1px, 
                    transparent 12px),
                
                /* 2. æ¨ªå‘ç¼–ç»³ç—•è¿¹ */
                repeating-linear-gradient(180deg, 
                    rgba(100, 80, 50, 0.1) 0px,
                    rgba(100, 80, 50, 0.1) 1px,
                    transparent 1px,
                    transparent 40px),
                
                /* 3. ç§¦éš¶ç¬”ç”»æ®‹ç—• - SVGæš—çº¹ */
                url('data:image/svg+xml;utf8,<svg width="200" height="200" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg"><path d="M30 30 L50 20 L70 35 L90 18 L110 40 L130 22 L150 45" stroke="%2380664a" stroke-width="0.8" opacity="0.2" fill="none"/><path d="M20 80 L45 70 L65 95 L85 75 L105 100 L125 80 L145 105" stroke="%237a5e42" stroke-width="0.7" opacity="0.18" fill="none"/><path d="M35 140 L55 125 L75 150 L95 130 L115 155 L135 135 L155 160" stroke="%23907b5f" stroke-width="0.6" opacity="0.16" fill="none"/><circle cx="50" cy="180" r="5" fill="%23948062" opacity="0.12"/><circle cx="160" cy="50" r="6" fill="%23948062" opacity="0.1"/><rect x="80" y="20" width="3" height="25" fill="%23948062" opacity="0.12" transform="rotate(15 80 20)"/><rect x="140" y="170" width="3.5" height="30" fill="%23948062" opacity="0.12" transform="rotate(30 140 170)"/><text x="25" y="190" font-size="24" font-family="SimSun" fill="%23948062" opacity="0.1">â– </text><text x="170" y="30" font-size="32" font-family="SimSun" fill="%23948062" opacity="0.08">â—</text></svg>'),
                
                /* 4. æœ¨çº¹çº¹ç† - å¢åŠ è‡ªç„¶æ„Ÿ */
                repeating-linear-gradient(45deg, 
                    rgba(160, 130, 90, 0.08) 0px,
                    rgba(160, 130, 90, 0.08) 2px,
                    transparent 2px,
                    transparent 20px);
            
            background-size: 
                24px 100%,    /* ç«–æ¡çº¹ */
                100% 80px,    /* æ¨ªç¼–ç»³ */
                280px 280px,  /* ç¬”ç”»æ®‹ç—• */
                30px 30px;    /* æœ¨çº¹ */
            
            background-position: 
                0 0,
                0 0,
                10px 15px,
                5px 8px;
            
            background-blend-mode: normal;
            background-attachment: fixed;
        }

        /* å åŠ ç¬¬äºŒå±‚æ·±è‰²ç«¹ç®€çº¹ç† - æ›´æ˜æ˜¾çš„ç®€ç‰æ°›å›´ */
        body::before {
            content: "";
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            background-image: 
                repeating-linear-gradient(170deg, 
                    rgba(110, 80, 50, 0.08) 0px,
                    rgba(110, 80, 50, 0.08) 2px,
                    transparent 2px,
                    transparent 30px),
                
                repeating-linear-gradient(10deg, 
                    rgba(130, 100, 70, 0.05) 0px,
                    rgba(130, 100, 70, 0.05) 1px,
                    transparent 1px,
                    transparent 50px),
                
                radial-gradient(circle at 20% 40%, rgba(150, 120, 80, 0.1) 0px, transparent 100px),
                radial-gradient(circle at 80% 70%, rgba(140, 110, 70, 0.1) 0px, transparent 150px);
            
            z-index: 1;
        }

        /* ä¸»å®¹å™¨ â€” ç½®äºæš—çº¹ä¸Šå±‚ */
        .main-wrap {
            max-width: 1400px;
            width: 100%;
            position: relative;
            z-index: 20;
        }

        /* =========== é¡µé¢ #1 : çº¯æœç´¢æ¡† ========= */
        .search-home {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            min-height: 80vh;
            text-align: center;
            padding: 1.5rem;
            position: relative;
            background-color: rgba(255, 250, 240, 0.75); /* åŠé€æ˜ç™½åº•ï¼Œè®©æš—çº¹é€å‡ºæ¥ */
            backdrop-filter: blur(1.5px);
            border-radius: 60px;
            box-shadow: 0 8px 32px rgba(80, 60, 40, 0.08);
            margin: 1rem 0;
        }

        .archive-title {
            font-size: 3.5rem;
            font-weight: 600;
            letter-spacing: 10px;
            color: #4a3a28;
            margin-bottom: 0.5rem;
            text-shadow: 3px 4px 6px rgba(0,0,0,0.02);
            border-bottom: 3px solid #baa27e;
            display: inline-block;
            padding-bottom: 0.2em;
            line-height: 1.3;
            position: relative;
        }

        /* æ ‡é¢˜è£…é¥° - ä»¿ç®€ç‰åˆ»ç—• */
        .archive-title::before,
        .archive-title::after {
            content: "âš²";
            font-size: 1.2rem;
            color: #9e8b72;
            opacity: 0.5;
            position: absolute;
            top: -5px;
        }
        .archive-title::before { left: -35px; }
        .archive-title::after { right: -35px; }

        .bamboo-stripe {
            width: 180px;
            height: 4px;
            background: linear-gradient(90deg, transparent, #b6a084, #8f7a5c, #b6a084, transparent);
            margin: 2.2rem auto 2rem;
            border-radius: 4px;
            box-shadow: 0 2px 8px rgba(100, 70, 40, 0.1);
        }

        /* æ ¸å¿ƒâ€”â€”å¤§æœç´¢æ¡†ï¼Œæ¯›ç»ç’ƒæ•ˆæœï¼Œé€å‡ºæš—çº¹ */
        .giant-search {
            width: 100%;
            max-width: 800px;
            margin: 1.5rem auto;
            position: relative;
            box-shadow: 0 20px 40px rgba(70, 55, 35, 0.1);
            border-radius: 70px;
            background: rgba(255, 255, 245, 0.7);
            backdrop-filter: blur(8px);
            border: 1px solid rgba(200, 175, 145, 0.4);
        }

        .giant-search input {
            width: 100%;
            padding: 1.6rem 2.2rem;
            font-size: 1.5rem;
            border: 1px solid rgba(180, 155, 125, 0.5);
            border-radius: 70px;
            outline: none;
            background: rgba(255, 255, 250, 0.65);
            color: #3a3327;
            transition: all 0.3s;
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.02);
            font-weight: 350;
            letter-spacing: 2px;
            backdrop-filter: blur(4px);
        }

        .giant-search input:focus {
            border-color: #aa8b6a;
            box-shadow: 0 8px 28px rgba(150, 110, 70, 0.15), inset 0 1px 6px rgba(255,255,255,0.8);
            background: rgba(255, 255, 250, 0.8);
        }

        .giant-search button {
            position: absolute;
            right: 10px;
            top: 10px;
            bottom: 10px;
            padding: 0 2.8rem;
            background: #7c6952;
            color: white;
            border: none;
            border-radius: 60px;
            font-size: 1.35rem;
            font-weight: 450;
            letter-spacing: 6px;
            cursor: pointer;
            transition: all 0.2s;
            box-shadow: 0 6px 16px rgba(90, 65, 40, 0.25);
            display: flex;
            align-items: center;
            justify-content: center;
            border: 1px solid rgba(255, 235, 200, 0.3);
        }

        .giant-search button:hover {
            background: #65523d;
            transform: scale(1.02);
            box-shadow: 0 10px 24px rgba(80, 60, 35, 0.3);
        }

        .search-hint {
            margin-top: 2.5rem;
            color: #5f5543;
            font-size: 1.05rem;
            background: rgba(225, 212, 194, 0.6);
            backdrop-filter: blur(4px);
            padding: 0.6rem 2.5rem;
            border-radius: 60px;
            display: inline-block;
            border: 1px solid rgba(170, 145, 115, 0.3);
            letter-spacing: 2px;
            font-weight: 400;
        }

        /* åº•éƒ¨ç®€ç‰å° */
        .footer-seal {
            margin-top: 15vh;
            color: #8e7d66;
            font-size: 0.9rem;
            letter-spacing: 3px;
            border-top: 1px dashed #b8a68b;
            padding-top: 1.5rem;
            width: 70%;
            backdrop-filter: blur(3px);
            background: rgba(250, 245, 235, 0.3);
            padding: 1rem 2rem;
            border-radius: 50px;
        }

        /* =========== é¡µé¢ #2 : ç»“æœå¡ç‰‡åŒº ========= */
        .result-container {
            display: none;
            width: 100%;
            animation: fadeSlide 0.3s ease;
            position: relative;
            z-index: 25;
        }

        @keyframes fadeSlide {
            0% { opacity: 0.5; transform: translateY(8px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            margin-bottom: 1.8rem;
            padding-bottom: 0.8rem;
            border-bottom: 2px solid #cbbfa8;
            background: rgba(255, 250, 240, 0.7);
            backdrop-filter: blur(5px);
            padding: 1rem 1.8rem;
            border-radius: 50px;
        }

        .back-to-search {
            display: flex;
            align-items: center;
            gap: 10px;
            background: #dfd6c9;
            padding: 0.6rem 1.8rem;
            border-radius: 40px;
            color: #4a3f31;
            font-weight: 600;
            border: none;
            cursor: pointer;
            font-size: 1.1rem;
            transition: all 0.2s;
        }

        .back-to-search:hover {
            background: #cec1b0;
            transform: translateX(-3px);
        }

        .match-stat {
            font-size: 1.2rem;
            color: #564b39;
            background: #ece4da;
            padding: 0.5rem 1.8rem;
            border-radius: 40px;
            font-style: italic;
            backdrop-filter: blur(3px);
        }

        .keyword-highlight {
            background: #ffd8a9;
            color: #6b4a2c;
            padding: 0.15rem 0.4rem;
            border-radius: 6px;
            font-weight: 600;
            border-bottom: 2px solid #b58b5c;
        }

        /* ç®€ç‰å¡ç‰‡ - åŸæ–‡å¡ç‰‡ï¼ˆæœç´¢ç»“æœé¡µåªæ˜¾ç¤ºè¿™ä¸ªï¼‰ */
        .jian-card-original {
            background: rgba(255, 255, 250, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid #dacfc1;
            border-radius: 32px;
            padding: 2rem 2.5rem;
            margin-bottom: 1.8rem;
            box-shadow: 0 12px 32px rgba(70, 55, 40, 0.08);
            transition: all 0.25s;
            cursor: pointer;
            position: relative;
        }

        .jian-card-original:hover {
            box-shadow: 0 20px 48px rgba(90, 70, 50, 0.15);
            background: rgba(255, 255, 250, 0.98);
            border-color: #b8a68b;
            transform: translateY(-2px);
        }

        .jian-card-original::after {
            content: "ç‚¹å‡»æŸ¥çœ‹å®Œæ•´ä¿¡æ¯";
            position: absolute;
            bottom: 1.2rem;
            right: 2rem;
            font-size: 0.8rem;
            color: #9e8b72;
            font-style: italic;
            letter-spacing: 1px;
            background: rgba(235, 225, 210, 0.6);
            padding: 0.3rem 1rem;
            border-radius: 30px;
            backdrop-filter: blur(2px);
            border: 1px solid rgba(170, 145, 115, 0.2);
        }

        /* å±•å¼€åçš„è¯¦ç»†ä¿¡æ¯å¡ç‰‡ */
        .jian-card-detail {
            background: rgba(255, 255, 250, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid #b8a68b;
            border-radius: 32px;
            padding: 2.2rem 2.5rem;
            margin-top: 1rem;
            margin-bottom: 2.5rem;
            box-shadow: 0 16px 40px rgba(70, 55, 40, 0.12);
            animation: expandCard 0.3s ease;
            border-left: 6px solid #8f7a5c;
        }

        @keyframes expandCard {
            0% { opacity: 0.6; transform: translateY(-10px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        .jian-id-lg {
            display: flex;
            align-items: baseline;
            gap: 1rem;
            margin-bottom: 1.8rem;
            flex-wrap: wrap;
        }

        .jian-number {
            background: #7e6b52;
            color: white;
            padding: 0.3rem 1.5rem;
            border-radius: 40px;
            font-size: 1.1rem;
            font-weight: 600;
            letter-spacing: 2px;
        }

        .jian-type-badge {
            background: #e3dbcf;
            padding: 0.3rem 1.5rem;
            border-radius: 30px;
            color: #4a4033;
            font-size: 0.95rem;
        }

        .chinese-original {
            font-size: 1.5rem;
            line-height: 1.75;
            background: #fdf9f2;
            padding: 1.8rem 2rem;
            border-radius: 24px;
            border-left: 10px solid #a59278;
            margin: 1.2rem 0 0.5rem;
            color: #2d2a1e;
            font-weight: 450;
            word-break: break-word;
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.02);
        }

        /* ä¿¡æ¯ç½‘æ ¼ - åªåœ¨è¯¦æƒ…é¡µæ˜¾ç¤º */
        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(270px, 1fr));
            gap: 1.5rem 2rem;
            background: #f6f2ea;
            padding: 2rem;
            border-radius: 28px;
            margin-top: 1.5rem;
            border: 1px solid #dfd5c7;
        }

        .info-item {
            display: flex;
            flex-direction: column;
            border-bottom: 1px dashed #cfc3b2;
            padding-bottom: 0.6rem;
        }

        .info-label {
            font-size: 0.7rem;
            text-transform: uppercase;
            letter-spacing: 2.5px;
            color: #786b57;
            font-weight: 700;
            margin-bottom: 0.25rem;
        }

        .info-value {
            font-size: 1.05rem;
            font-weight: 500;
            color: #2f2b21;
            word-break: break-word;
        }

        .empty-placeholder {
            color: #948a7a;
            font-style: italic;
        }

        /* æ”¶èµ·æŒ‰é’® */
        .collapse-btn {
            margin-top: 1.5rem;
            text-align: right;
        }

        .collapse-btn button {
            background: #dfd6c9;
            border: none;
            padding: 0.5rem 1.8rem;
            border-radius: 40px;
            color: #4a3f31;
            font-size: 0.95rem;
            cursor: pointer;
            transition: all 0.2s;
            border: 1px solid rgba(170, 145, 115, 0.2);
            letter-spacing: 1px;
        }

        .collapse-btn button:hover {
            background: #cec1b0;
        }

        .no-result {
            background: rgba(255, 255, 250, 0.85);
            backdrop-filter: blur(8px);
            padding: 4rem 2rem;
            text-align: center;
            border-radius: 60px;
            border: 1px solid #cfc3b2;
            color: #615749;
            font-size: 1.5rem;
        }

        @media (max-width: 600px) {
            .archive-title { font-size: 2.2rem; letter-spacing: 5px; }
            .giant-search input { font-size: 1.2rem; padding: 1.2rem 1.5rem; }
            .giant-search button { padding: 0 1.2rem; font-size: 1rem; }
            .chinese-original { font-size: 1.2rem; }
            .jian-card-original::after { 
                position: static; 
                margin-top: 1rem;
                display: inline-block;
            }
        }
    </style>
</head>
<body>
    <div class="main-wrap">
        <!-- ========= é¡µé¢ 1ï¼š çº¯æœç´¢é¦–é¡µ ========= -->
        <div id="searchHome" class="search-home">
            <div>
                <div class="archive-title">é‡Œè€¶ç§¦ç®€è¯­æ–™åº“æ£€ç´¢ç³»ç»Ÿ</div>
                <div class="bamboo-stripe"></div>

                <!-- å·¨å¹•æœç´¢æ¡† -->
                <div class="giant-search">
                    <input type="text" id="searchInputHome" placeholder="è¾“å…¥ç®€å·ã€åŸæ–‡ã€æœºæ„æˆ–äººåâ€¦" value="">
                    <button id="homeSearchBtn">æ£€ç´¢</button>
                </div>

            </div>
            <!-- åº•éƒ¨ -->
            <div class="footer-seal">
                å‰é¦–å¤§å­¦å¤–å›½è¯­å­¦é™¢ Â· 2026
            </div>
        </div>

        <!-- ========= é¡µé¢ 2ï¼š ç»“æœå±•ç¤ºåŒº ========= -->
        <div id="resultPage" class="result-container">
            <div class="result-header">
                <button id="backToHomeBtn" class="back-to-search">
                    â† è¿”å›æ£€ç´¢
                </button>
                <span id="resultStats" class="match-stat">æ‰¾åˆ° 2 æ¡ç®€ç‰</span>
            </div>
            <div id="resultList"></div>
        </div>
    </div>

    <script>
        (function(){
            "use strict";

            // ç§¦ç®€ç‰æ ¸å¿ƒæ•°æ® â€”â€” å®Œå…¨ä¾ç…§dianzibiao.xlsxæ–‡ä¹¦ç±»è¡¨æ ¼å¡«å……
            const JIAN_DATA = [
                {
                    id: 1,
                    jianhao: "10-655ã€10-1093",
                    chinese: "äºŒæœˆå·±äº¥ï¼Œè¿é™µå®ˆä¸æ•¦ç‹å‘Šè´°æ˜¥ä¹¡ä¸»ï¼šåº“åè¨€è´°æ˜¥ä¹¡æ•…è†ç››ä¹¦æœ¨æ¨»ï¼ˆæŸœï¼‰ï¼Œå…¶ä»¥ä¹¦åˆ°æ—¶ä»¥ç››ä¸»ä¹¡å¼¦å½“è¾“è€…ï¼Œæœ‰ï¼ˆåˆï¼‰è¾“äº¶æ¨»ï¼ˆæŸœï¼‰å››ï¼Œä¸”ä»¥ç››å¼¦å½“è¾“å†…å²è€…ï¼Œä»¥å±ä½â–¡â–¡ã€‚/çˆ½ï¼ˆæ‰‹ï¼‰ã€‚/å³æ°´ä¸‹å››ã€åˆ»ã€‘ï¼Œä½èµ¾è¡Œã€‚èµ¾æ‰‹ã€‚äºŒæœˆåºšå­æ°´ä¸‹äºŒåˆ»ï¼Œä½èµ¾ä»¥æ¥ã€‚â–¡åŠã€‚",
                    chinese_definition: "äºŒæœˆå·±äº¥æ—¥ï¼Œè¿é™µå¿ä»£ç†å¿ä¸æ•¦ç‹å‘ŠçŸ¥è´°æ˜¥ä¹¡çš„è´Ÿè´£äººï¼šå¿åº“åæ¥ä¼ ä»¤è¯´ï¼Œè´°æ˜¥ä¹¡åŸæœ‰åŸæ¥šå›½ç”¨æ¥è£…æ–‡ä¹¦çš„æœ¨æŸœï¼Œè¦åœ¨æ–‡ä¹¦é€è¾¾æ—¶ï¼Œç”¨è¿™äº›æœ¨æŸœæ¥è£…æœ¬ä¹¡åº”å½“ä¸Šç¼´çš„å¼“å¼¦ï¼›å¦å¤–è¿˜è¦ä¸Šç¼´å››ä¸ªæ–°æœ¨æŸœï¼Œç”¨æ¥è£…è¦è¾“é€ç»™å†…å²ï¼ˆä¸­å¤®å®˜èŒï¼‰çš„å¼“å¼¦ï¼Œæ­¤äº‹äº¤ç”±ä½åâ–¡â–¡è´Ÿè´£ã€‚/ çˆ½ï¼ˆäººåï¼‰æ‰‹ä¹¦ã€‚ï¼ˆæ–‡ä¹¦ï¼‰åœ¨ï¼ˆäºŒæœˆå·±äº¥æ—¥ï¼‰æ¼å£¶æ°´ä¸‹å››åˆ»æ—¶ï¼Œç”±ä½åèµ¾ä¼ é€ã€‚èµ¾ï¼ˆäººåï¼‰æ‰‹ä¹¦ã€‚äºŒæœˆåºšå­æ—¥æ¼å£¶æ°´ä¸‹äºŒåˆ»æ—¶ï¼Œä½åèµ¾å°†ï¼ˆæ–‡ä¹¦ï¼‰é€è¾¾ã€‚â–¡åŠï¼ˆå¯èƒ½æ˜¯æ¥æ”¶äººç­¾åï¼‰ã€‚",
                    english: "",
                    supplementary: "è¿™æ®µæ–‡å­—ä½“ç°äº†ç§¦ä»£åŸºå±‚è¡Œæ”¿çš„ç‰©èµ„è°ƒé…æµç¨‹ï¼šå¿ä¸€çº§çš„åº“å®˜å‘ä¹¡ä¸‹è¾¾æŒ‡ä»¤ï¼Œæ˜ç¡®æœ¨æŸœçš„ç”¨é€”ï¼ˆè£…æ–‡ä¹¦ / è£…å¼“å¼¦ï¼‰ã€ä¸Šç¼´è¦æ±‚ï¼ŒåŒæ—¶æŒ‡å®šå…·ä½“ç»åŠäººï¼Œå¹¶è®°å½•äº†æ–‡ä¹¦çš„ä¼ é€æ—¶é—´ä¸ç»æ‰‹äººï¼Œæ˜¯ç§¦ä»£æ–‡ä¹¦è¡Œæ”¿è§„èŒƒåŒ–çš„å…¸å‹ä½“ç°ã€‚",
                    type: "ä¸‹è¡Œæ–‡ä¹¦",
                    excavated: "",
                    institution: "æ¹–å—çœæ–‡ç‰©è€ƒå¤ç ”ç©¶æ‰€",
                    image: "",
                    image_source: "",
                    entry_date: "2026/2/11",
                    remarks: "ç§¦ä»£åŸºå±‚ç‰©èµ„è°ƒé…æŒ‡ä»¤ï¼šè´°æ˜¥ä¹¡éœ€ä¸Šç¼´å¼“å¼¦ï¼Œç”¨åŸæ¥šåœ°æ—§æœ¨æŸœè£…æœ¬ä¹¡åº”è¾“éƒ¨åˆ†ï¼Œå¦ç¼´4ä¸ªæ–°æœ¨æŸœè£…é€å†…å²çš„å¼“å¼¦ã€‚è®°å½•å®Œæ•´ä¼ é€’æ—¶é—´é“¾ã€‚",
                    sender: "è¿é™µå®ˆä¸ï¼ˆæ•¦ç‹ï¼‰",
                    receiver: "è´°æ˜¥ä¹¡ä¸»",
                    transmit_mode: "é—¨äº­è¡Œï¼ˆä½èµ¾ä¼ é€’ï¼‰",
                    level: "å¿â†’ä¹¡",
                    formula: "å‘Šâ€¦â€¦ä¸»ï¼›æ‰‹ï¼›ä»¥æ¥",
                    agent: "çˆ½ï¼ˆæ‰‹ä¹¦ï¼‰ã€ä½èµ¾ï¼ˆä¼ é€’ï¼‰",
                    time_record: "äºŒæœˆå·±äº¥æ°´ä¸‹å››åˆ»ï¼ˆå‘å‡ºï¼‰ï¼›äºŒæœˆåºšå­æ°´ä¸‹äºŒåˆ»ï¼ˆé€è¾¾ï¼‰"
                },
                {
                    id: 2,
                    jianhao: "ï¼ˆæ— ç®€å·ï¼‰",
                    chinese: "å°‰æ›¹ä¹¦äºŒå°ï¼Œä¸å°ã€‚ä¸€å°è¯£é›¶é˜³ï¼Œä¸€å°è¯£æ˜†é˜³é‚‘ï¼Œä¹æœˆå·±äº¥æ°´ä¸‹å…«ï¼Œèµ°å°ä»¥â–¡",
                    chinese_definition: "å°‰æ›¹çš„æ–‡ä¹¦ä¸¤å°ï¼Œç›–æœ‰å¿ä¸çš„å®˜å°ã€‚ä¸€å°é€å¾€é›¶é˜³å¿ï¼Œä¸€å°é€å¾€æ˜†é˜³é‚‘ï¼Œä¹æœˆå·±äº¥æ—¥æ¼å£¶æ°´ä¸‹å…«åˆ»æ—¶ï¼Œç”±èµ°å’å°é€è¾¾ã€æ­¤å¤„æ–‡å­—æ®‹ç¼ºã€‘",
                    english: "Two sealed documents from Wei Cao, stamped with the County Assistant's seal. One addressed to Lingyang County, one to Kunyang Yi. On the day Jihai of the ninth month, at the eighth ke of the water clock, delivered by the runner [name]â€¦",
                    supplementary: "ç§¦ä»£â€œé‚®ä¹¦åˆºâ€å…¸å‹è®°å½•ï¼Œå®Œæ•´å‘ˆç°æ–‡ä¹¦è´£ä»»å•ä½ã€å°ç¼„å®˜å°ã€é€è¾¾ç›®çš„åœ°ã€ä¼ é€’æ—¶é—´åŠç»åŠäºº",
                    type: "é‚®ä¹¦åˆº",
                    excavated: "",
                    institution: "",
                    image: "",
                    image_source: "",
                    entry_date: "",
                    remarks: "æ–‡å­—å°¾éƒ¨æ®‹ç¼º",
                    sender: "å°‰æ›¹",
                    receiver: "é›¶é˜³å¿ã€æ˜†é˜³é‚‘",
                    transmit_mode: "èµ°å’ä¼ é€’",
                    level: "å¿â†’å¿/é‚‘",
                    formula: "ä¹¦äºŒå°ï¼Œä¸å°ï¼Œè¯£æŸåœ°",
                    agent: "èµ°ï¼ˆå°ï¼‰",
                    time_record: "ä¹æœˆå·±äº¥æ°´ä¸‹å…«åˆ»"
                }
            ];

            const searchHome = document.getElementById('searchHome');
            const resultPage = document.getElementById('resultPage');
            const homeInput = document.getElementById('searchInputHome');
            const homeSearchBtn = document.getElementById('homeSearchBtn');
            const backBtn = document.getElementById('backToHomeBtn');
            const resultListEl = document.getElementById('resultList');
            const resultStats = document.getElementById('resultStats');

            // å­˜å‚¨å½“å‰å±•å¼€çš„å¡ç‰‡ID
            let expandedCardId = null;

            function highlightKeyword(text, keyword) {
                if (!keyword || keyword.trim() === '') return text;
                const escaped = keyword.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
                const regex = new RegExp(`(${escaped})`, 'gi');
                if (typeof text === 'string') {
                    return text.replace(regex, `<span class="keyword-highlight">$1</span>`);
                }
                return text;
            }

            // æ¸²æŸ“åŸæ–‡å¡ç‰‡ï¼ˆæœç´¢åé»˜è®¤æ˜¾ç¤ºï¼‰
            function renderOriginalCard(item, query) {
                const originalHighlighted = highlightKeyword(item.chinese, query);
                
                return `
                    <div class="jian-card-original" data-card-id="${item.id}">
                        <div style="display: flex; align-items: baseline; gap: 0.8rem; margin-bottom: 1rem; flex-wrap: wrap;">
                            <span style="background: #7e6b52; color: white; padding: 0.2rem 1.2rem; border-radius: 40px; font-size: 1rem; font-weight: 600; letter-spacing: 1.5px;">ğŸ“ ${item.jianhao}</span>
                            <span style="background: #e3dbcf; padding: 0.2rem 1.2rem; border-radius: 30px; color: #4a4033; font-size: 0.9rem;">${item.type || 'â€”'}</span>
                        </div>
                        <div class="chinese-original" style="margin-top: 0.5rem; margin-bottom: 0.5rem;">
                            ${originalHighlighted}
                        </div>
                    </div>
                `;
            }

            // æ¸²æŸ“è¯¦ç»†ä¿¡æ¯å¡ç‰‡ï¼ˆç‚¹å‡»åå±•å¼€ï¼‰
            function renderDetailCard(item, query) {
                const highlight = (str) => {
                    if (!str || str === 'â€”') return str || '<span class="empty-placeholder">â€”</span>';
                    if (typeof str !== 'string') return str;
                    return highlightKeyword(str, query);
                };

                const formatValue = (val) => {
                    if (!val || val === '') return '<span class="empty-placeholder">â€”</span>';
                    return highlight(val);
                };

                return `
                    <div class="jian-card-detail" id="detail-${item.id}">
                        <div class="jian-id-lg">
                            <span class="jian-number">ğŸ“ ${item.jianhao}</span>
                            <span class="jian-type-badge">${item.type || 'â€”'}</span>
                            <span style="margin-left: auto; color:#6e624e; background: #eae5db; padding:0.2rem 1.2rem; border-radius:30px; font-size:0.85rem;">ğŸº ${item.institution || 'â€”'}</span>
                        </div>

                        <div class="chinese-original" style="margin-top: 0.5rem;">
                            ${highlightKeyword(item.chinese, query)}
                        </div>

                        <div class="info-grid">
                            <div class="info-item"><span class="info-label">ç®€å·</span><span class="info-value">${item.jianhao}</span></div>
                            <div class="info-item"><span class="info-label">ä¸­æ–‡é‡Šä¹‰</span><span class="info-value">${highlight(item.chinese_definition)}</span></div>
                            <div class="info-item"><span class="info-label">è‹±æ–‡è¯‘æ–‡</span><span class="info-value">${formatValue(item.english)}</span></div>
                            <div class="info-item"><span class="info-label">è¡¥å……è¯´æ˜</span><span class="info-value">${highlight(item.supplementary)}</span></div>
                            <div class="info-item"><span class="info-label">ç®€ç‰ç±»å‹</span><span class="info-value">${item.type}</span></div>
                            <div class="info-item"><span class="info-label">å‡ºåœŸæ‰¹æ¬¡</span><span class="info-value">${formatValue(item.excavated)}</span></div>
                            <div class="info-item"><span class="info-label">æ”¶è—æœºæ„</span><span class="info-value">${formatValue(item.institution)}</span></div>
                            <div class="info-item"><span class="info-label">å›¾ç‰‡</span><span class="info-value">${formatValue(item.image)}</span></div>
                            <div class="info-item"><span class="info-label">å›¾ç‰‡æ¥æº</span><span class="info-value">${formatValue(item.image_source)}</span></div>
                            <div class="info-item"><span class="info-label">å½•å…¥æ—¥æœŸ</span><span class="info-value">${formatValue(item.entry_date)}</span></div>
                            <div class="info-item"><span class="info-label">å¤‡æ³¨</span><span class="info-value">${highlight(item.remarks)}</span></div>
                            <div class="info-item"><span class="info-label">å‘æ–‡æœºæ„</span><span class="info-value">${highlight(item.sender)}</span></div>
                            <div class="info-item"><span class="info-label">æ”¶æ–‡æœºæ„</span><span class="info-value">${highlight(item.receiver)}</span></div>
                            <div class="info-item"><span class="info-label">ä¼ é€’æ–¹å¼</span><span class="info-value">${highlight(item.transmit_mode)}</span></div>
                            <div class="info-item"><span class="info-label">å±‚çº§å…³ç³»</span><span class="info-value">${item.level}</span></div>
                            <div class="info-item"><span class="info-label">æ–‡ä¹¦ç¨‹å¼è¯­</span><span class="info-value">${highlight(item.formula)}</span></div>
                            <div class="info-item"><span class="info-label">ç»åŠäºº</span><span class="info-value">${highlight(item.agent)}</span></div>
                            <div class="info-item"><span class="info-label">ä¼ é€’æ—¶é—´è®°å½•</span><span class="info-value">${highlight(item.time_record)}</span></div>
                            <div class="info-item"><span class="info-label">åºå·/æ–‡ä¹¦å·</span><span class="info-value">${item.id}</span></div>
                        </div>
                        
                        <div class="collapse-btn">
                            <button onclick="document.getElementById('detail-${item.id}').style.display='none'; document.querySelector('[data-card-id=\"${item.id}\"]').style.display='block'; expandedCardId = null;">æ”¶èµ·å®Œæ•´ä¿¡æ¯</button>
                        </div>
                    </div>
                `;
            }

            // æ¸²æŸ“æœç´¢ç»“æœåˆ—è¡¨
            function renderSearchResults(results, query) {
                if (results.length === 0) {
                    resultListEl.innerHTML = `<div class="no-result">ğŸ” æœªæ£€ç´¢åˆ° â€œ${query}â€<br><span style="font-size:1rem;">å°è¯• â€œå¼“å¼¦ã€æœ¨æŸœã€æ•¦ç‹ã€è´°æ˜¥ã€å°‰æ›¹ã€é›¶é˜³â€ ç­‰è¯</span></div>`;
                    return;
                }

                let html = '';
                results.forEach(doc => {
                    // åªæ·»åŠ åŸæ–‡å¡ç‰‡ï¼Œè¯¦ç»†ä¿¡æ¯å¡ç‰‡åœ¨ç‚¹å‡»æ—¶æ‰åŠ¨æ€æ’å…¥
                    html += renderOriginalCard(doc, query);
                });
                resultListEl.innerHTML = html;

                // ä¸ºæ‰€æœ‰åŸæ–‡å¡ç‰‡æ·»åŠ ç‚¹å‡»äº‹ä»¶
                results.forEach(doc => {
                    const cardElement = document.querySelector(`[data-card-id="${doc.id}"]`);
                    if (cardElement) {
                        cardElement.addEventListener('click', function(e) {
                            // å¦‚æœå½“å‰å·²ç»æœ‰å±•å¼€çš„å¡ç‰‡ï¼Œå…ˆç§»é™¤
                            if (expandedCardId !== null) {
                                const expandedDetail = document.getElementById(`detail-${expandedCardId}`);
                                const expandedOriginal = document.querySelector(`[data-card-id="${expandedCardId}"]`);
                                if (expandedDetail) expandedDetail.remove();
                                if (expandedOriginal) expandedOriginal.style.display = 'block';
                            }

                            // éšè—å½“å‰åŸæ–‡å¡ç‰‡ï¼Œæ’å…¥è¯¦ç»†ä¿¡æ¯å¡ç‰‡
                            this.style.display = 'none';
                            const detailHtml = renderDetailCard(doc, query);
                            this.insertAdjacentHTML('afterend', detailHtml);
                            expandedCardId = doc.id;

                            // é‡æ–°ç»‘å®šæ”¶èµ·æŒ‰é’®çš„äº‹ä»¶
                            const collapseBtn = document.querySelector(`#detail-${doc.id} .collapse-btn button`);
                            if (collapseBtn) {
                                collapseBtn.onclick = function() {
                                    const detailEl = document.getElementById(`detail-${doc.id}`);
                                    const originalEl = document.querySelector(`[data-card-id="${doc.id}"]`);
                                    if (detailEl) detailEl.remove();
                                    if (originalEl) originalEl.style.display = 'block';
                                    expandedCardId = null;
                                };
                            }
                        });
                    }
                });
            }

            function performSearch(keyword) {
                if (!keyword || keyword.trim() === '') keyword = '';
                const query = keyword.trim();

                const results = JIAN_DATA.filter(item => {
                    if (query === '') return true;
                    const searchable = [
                        item.jianhao, item.chinese, item.chinese_definition, item.remarks, 
                        item.supplementary, item.sender, item.receiver, item.transmit_mode, 
                        item.level, item.formula, item.agent, item.time_record, item.type, 
                        item.institution, item.entry_date, item.english
                    ].map(val => val ? val.toString().toLowerCase() : '');
                    const lowerQuery = query.toLowerCase();
                    return searchable.some(text => text.includes(lowerQuery));
                });

                // åˆ‡æ¢è§†å›¾: éšè—é¦–é¡µï¼Œæ˜¾ç¤ºç»“æœé¡µ
                searchHome.style.display = 'none';
                resultPage.style.display = 'block';

                const count = results.length;
                let statText = count === 0 ? 'æœªæ‰¾åˆ°åŒ¹é…ç®€ç‰' : `å‘ç° ${count} æ¡ç®€ç‰ Â· â€œ${query || 'å…¨éƒ¨'}â€`;
                if (query === '') statText = `å…¨éƒ¨ç®€ç‰ Â· å…± ${count} æ¡`;
                resultStats.innerHTML = statText;

                // é‡ç½®å±•å¼€çŠ¶æ€
                expandedCardId = null;
                
                // æ¸²æŸ“æœç´¢ç»“æœ
                renderSearchResults(results, query);
            }

            function goBackHome() {
                searchHome.style.display = 'flex';
                resultPage.style.display = 'none';
                homeInput.value = '';
                homeInput.focus();
                expandedCardId = null;
            }

            // äº‹ä»¶ç»‘å®š
            homeSearchBtn.addEventListener('click', (e) => { e.preventDefault(); performSearch(homeInput.value); });
            homeInput.addEventListener('keydown', (e) => { if (e.key === 'Enter') { e.preventDefault(); performSearch(homeInput.value); } });
            backBtn.addEventListener('click', goBackHome);
            window.addEventListener('load', () => { 
                searchHome.style.display = 'flex'; 
                resultPage.style.display = 'none';
                resultStats.innerHTML = 'æ‰¾åˆ° 2 æ¡ç®€ç‰';
            });
        })();
    </script>
</body>
</html>